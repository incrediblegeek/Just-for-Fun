import pygame
from pygame.locals import *
import random


COLORS = ['#00FF00', '#8A2BE2', '#00BFFF', '#FFD700', '#FF8C00', '#FF0000']
clist2 = ['-------------------*---------------------',
          '-------------------*---------------------',
          '------------------^^^--------------------',
          '------------------^^^--------------------',
          '-----------------^^^^^-------------------',
          '-----------------^^^^^-------------------',
          '----------------^^^^^^^------------------',
          '----------------^^^^^^^------------------',
          '---------------^^^^^^^^^-----------------',
          '---------------^^^^^^^^^-----------------',
          '--------------^^^^^^^^^^^----------------',
          '-------------^^^^^^^^^^^^^---------------',
          '-------------^^^^^^^^^^^^^---------------',
          '------------------...--------------------',
          '------------------...--------------------',
          '------------------...--------------------',
          '-----------------------------------------',
          '----------^--^--^^--^^--^^--^-^----------',
          '----------^--^-^--^-^-^-^-^-^-^----------',
          '----------^--^-^--^-^-^-^-^-^-^----------',
          '----------^^^^-^^^^-^^--^^---^^----------',
          '----------^--^-^--^-^---^-----^----------',
          '----------^--^-^--^-^---^---^^-----------',
          '-----------------------------------------',
          '-------------^^---^^----^--^-------------',
          '------------^--^-^--^--^^-^-^------------',
          '---------------^-^--^-^-^-^-^------------',
          '--------------^--^--^---^--^^------------',
          '-------------^---^--^---^---^------------',
          '------------^^^^--^^----^-^^-------------']

clist = ['---------------------------------------^^^^--',
         '--------------------------------$$$---^^^----',
         '--------------------------------$$$--^^^-----',
         '-------------------------^^^^^^-$$$$^^^------',
         '------------------------^^^^^^^^$$$$$$-------',
         '------------------------^^^^^^$$$$--$$$------',
         '------------------------^^^^^$$-----$$$$-----',
         '------------------------^^^^$$------$$$$$----',
         '-----------------------^^^^$$----$$----$$$---',
         '-----------------------^^^^$$----$$$$$--$$$--',
         '^^^^^-------------------^^$$----$$$-$$$$$$$--',
         '^^^^^^----$$$$$$--------^^$$-----$$---$$$$$--',
         '^^^^^^^^$$$$$$$$$$$$$----$$$-$$--$$----------',
         '^^^^^^^$$---------$$$$$$$$$--$$$-$$----------',
         '^^^^^^$$--------------$$$-------$$$----------',
         '^^^^^^$$------$$----------------$$-----------',
         '^^^^^$$------$$$-----------------$$----------',
         '^^^^-$$$-----$$$-----------------$$----------',
         '^^^---$$$$---$$$----------------$$$----------',
         '^^^----$$$$--$$$$$$$----$$$$$--$$$-----------',
         '^^^-----$$$-$$$-$$$$$$$$$$$$$$$$$$-----------',
         '-^^-----$$$$$--------$$--$$$$-$$$$$$---------',
         '^^^-----$$$$--------------$$$----$$$$--------',
         '^^-----$$$$----------------$$$-----$$--------',
         '------$$$$------------------$$-----$$--------',
         '-----$$$$$$----------------$$$----$$$--------',
         '-----$$$--$$$-----------$$$$$-$$$$$$---------',
         '-----$$$---$$$----------$$$$--$$$$$----------',
         '------$$$---$$$----------$-----$-------------',
         '--------$$--$$-------------------------------',
         '--------$$-----------------------------------',
         '---------------------------------------------',
         '------------^--^--^^--^^--^^--^-^------------',
         '------------^--^-^--^-^-^-^-^-^-^------------',
         '------------^--^-^--^-^-^-^-^-^-^------------',
         '------------^^^^-^^^^-^^--^^---^^------------',
         '------------^--^-^--^-^---^-----^------------',
         '------------^--^-^--^-^---^---^^-------------',
         '---------------------------------------------',
         '-----^^--^^^--^^--^^^^^-^--^-^^---^^--^-^----',
         '-----^-^--^---^-^---^---^--^-^-^-^--^-^-^----',
         '-----^^---^---^-^---^---^--^-^-^-^--^-^-^----',
         '-----^-^--^---^^----^---^^^^-^-^-^^^^--^^----',
         '-----^-^--^---^-^---^---^--^-^-^-^--^---^----',
         '-----^^--^^^--^-^---^---^--^-^^--^--^-^^-----',
         '---------------------------------------------',
         '------------^^^^^-^^----^---^-^^^------------',
         '--------------^--^--^---^^-^^-^--------------',
         '--------------^--^--^---^-^-^-^^^------------',
         '--------------^--^--^---^---^-^--------------',
         '--------------^--^--^---^---^-^--------------',
         '--------------^---^^----^---^-^^^------------']


def from_file(filename):
    clist = []
    f = open(filename, 'r')
    line = f.readline()
    row = 0
    while line:
        clist.append(str(line))
        line = f.readline()
    return clist


class Postcard:
    def __init__(self, clist: list, cell_size: int = 7, speed: int = 10) -> None:
        # количество ячеек
        self.cell_width = len(clist[0])
        self.cell_height = len(clist)

        # Скорость протекания игры
        self.speed = speed

        self.cell_size = cell_size

        # размеры окна
        self.width = self.cell_width * cell_size
        self.height = self.cell_height * cell_size
        self.screen_size = self.width, self.height

        # Создание нового окна
        self.screen = pygame.display.set_mode(self.screen_size)


    def draw_grid(self) -> None:
        """ Отрисовать сетку """
        for x in range(0, self.width, self.cell_size):
            pygame.draw.line(self.screen, pygame.Color('#006400'), (x, 0), (x, self.height))
        for y in range(0, self.height, self.cell_size):
            pygame.draw.line(self.screen, pygame.Color('#006400'), (0, y), (self.width, y))

    def run(self) -> None:
        """ Запустить игру """
        pygame.init()
        clock = pygame.time.Clock()
        pygame.display.set_caption('Postcard')
        self.screen.fill(pygame.Color('Black'))

        running = True
        while running:
            for event in pygame.event.get():
                if event.type == QUIT:
                    running = False
            self.draw_grid()
            self.draw_cell_list()

            pygame.display.flip()
            clock.tick(self.speed)
        pygame.quit()

    def draw_cell_list(self) -> None:
        """ Отображение списка клеток """
        for row in range(len(clist)):
            col = 0
            for cell in clist[row]:
                x = col * self.cell_size + 1
                y = row * self.cell_size + 1
                a = self.cell_size
                b = self.cell_size
                if cell == '-':
                    pygame.draw.rect(self.screen, pygame.Color('Black'), (x, y, a, b))
                elif cell == '*':
                    pygame.draw.rect(self.screen, pygame.Color('Red'), (x, y, a, b))
                elif cell == '^':
                    pygame.draw.rect(self.screen, pygame.Color(random.choice(COLORS)), (x, y, a - 1, b - 1))
                elif cell == '.':
                    pygame.draw.rect(self.screen, pygame.Color('Brown'), (x, y, a, b))
                elif cell == '$':
                    pygame.draw.rect(self.screen, pygame.Color('#FFB6C1'), (x, y, a, b))
                col += 1

    def update(self):
        for row in range(len(clist)):
            col = 0
            for cell in clist[row]:
                x = col * self.cell_size + 1
                y = row * self.cell_size + 1
                a = self.cell_size
                b = self.cell_size
                if cell == '^':
                    return pygame.draw.rect(self.screen, pygame.Color(random.choice(COLORS)), (x, y, a - 1, b - 1))



if __name__ == "__main__":
    postcard = Postcard(clist)
    postcard.run()

